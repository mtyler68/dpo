<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

  <ui:define name="subheader">
    Class Rooms
  </ui:define>

  <ui:define name="content">
    <h:form id="form">
      <div class="Container100">
        <div class="ContainerIndent">
          <div class="Card ShadowEffect TexAlLeft">


            <div class="TexAlRight">
              <p:commandButton id="addBtn" icon="fa fa-plus Fs16 White" value="Add Room">
                <p:ajax listener="#{classRoomsView.prepareNewClassRoom()}" oncomplete="PF('roomDlg').show()"
                        update=":form:roomDlg"/>
              </p:commandButton>

              <p:commandButton id="helpBtn" icon="fa fa-question  Fs16 White" type="button" value="Help"/>
              <p:overlayPanel for="helpBtn" hideEffect="fade" style="width:500px;">
                <div class="TexAlLeft">
                  <div>
                    Class rooms are locations for classes. You may have multiple rooms at a single site or rooms at multiple sites.
                  </div>
                  <div>
                    Create a class room for each room you may conduct classes and use the name to understand where they are.
                  </div>
                </div>
              </p:overlayPanel>
            </div>

            <br/>
            <p:dataTable id="roomsTable" widgetVar="roomsTable" value="#{classRoomsView.rooms}" var="classRoom">

              <p:column headerText="Name">
                <h:outputText value="#{classRoom.name}"/>
              </p:column>

              <p:column headerText="Actions">
                <p:commandButton id="editBtn" icon="fa fa-edit Fs16 White" styleClass="OrangeButton"
                                 update=":form:roomDlg" oncomplete="PF('roomDlg').show()" title="Edit">
                  <f:setPropertyActionListener value="#{classRoom}" target="#{classRoomsView.selectedRoom}"/>
                </p:commandButton>

                <p:commandButton id="archiveBtn" icon="fa fa-trash-o Fs16 White" title="Archive" styleClass="RedButton"
                                 update=":form:archiveDlg" oncomplete="PF('archiveDlg').show()">
                  <f:setPropertyActionListener value="#{classRoom}" target="#{classRoomsView.selectedRoom}"/>
                </p:commandButton>
              </p:column>
            </p:dataTable>
            <br/><br/>
          </div>
        </div>
      </div>

      <p:dialog id="roomDlg" widgetVar="roomDlg" width="500" showEffect="slide" hideEffect="slide"
                header="Class Room">

        <f:facet name="footer">
          <div class="TexAlRight">
            <p:commandButton id="saveBtn" value="Save" oncomplete="PF('roomDlg').hide()"
                             actionListener="#{classRoomsView.saveClassRoom()}" update=":form:roomsTable"/>
            <p:commandButton id="cancelBtn" value="Cancel" onclick="PF('roomDlg').hide()"/>
          </div>               
        </f:facet>

        <div class="Container100 TexAlLeft">
          <div class="Container100">
            <h:outputLabel value="Name:"/>
          </div>
          <div class="Container100">
            <p:inputText id="dlgName" value="#{classRoomsView.selectedRoom.name}" class="Wid80"/>
          </div>
        </div>
      </p:dialog>

      <p:confirmDialog id="archiveDlg" widgetVar="archiveDlg" showEffect="slide" hideEffect="slide" severity="alert"
                       header="Confirm Archive">
        <f:facet name="message">
          <h:outputText value="Are you sure you want to archive the '#{classRoomsView.selectedRoom.name}' room?"/>
        </f:facet>
        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check">
          <p:ajax listener="#{classRoomsView.archiveSelectedClassRoom()}" update=":form:roomsTable"
                  oncomplete="PF('archiveDlg').hide()"/>
        </p:commandButton>
        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" 
                         onclick="PF('archiveDlg').hide()"/>
      </p:confirmDialog>

    </h:form>
  </ui:define>

</ui:composition>